,"National P20 Growth Rate"="NP20growthrate"
,"Baseline P20 Headcount"="P20HC.0"
,"Baseline National P20 Headcount"="NP20HC.0"
,"Baseline Extreme Poverty Headcount"="ExtremeHC.0"
,"Latest Extreme Poverty Headcount"="ExtremeHC.1"
,"Latest P20 Headcount"="P20HC.1"
,"Latest National P20 Headcount"="NP20HC.1"
)
layernames=names(layers)
url <- "http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/50m/cultural/ne_50m_admin_0_countries.zip"
tmp <- tempdir()
file <- basename(url)
if(!file.exists(file)){
download.file(url, file)
}
unzip(file, exdir = tmp)
countries <- readOGR(dsn = tmp,
layer = "ne_50m_admin_0_countries",
encoding = "UTF-8",
verbose = FALSE)
countries.f=fortify(countries,region="NAME")
countries.f$source="national"
countries.f$LB=0
dhs_growth.f=fortify(dhs_growth,region="OBJECTID")
dhs_growth_data=dhs_growth@data
setnames(dhs_growth_data,"OBJECTID","id")
dhs_growth_data$LB=0
dhs_growth_data$LB[which(dhs_growth_data$ExtremeHC.1>.45)]=1
dhs_growth_data$LB[which(dhs_growth_data$ExtremeHC.1>.20 & dhs_growth_data$ext.growthrate>0)]=1
dhs_growth_data$LB[which(is.na(dhs_growth_data$ExtremeHC.1))]=NA
dhs_growth_data=dhs_growth_data[which(!is.na(dhs_growth_data$LB)),]
dhs_growth_data=dhs_growth_data[,c("id","LB")]
dhs_growth.f=merge(dhs_growth.f, dhs_growth_data, by=c("id"))
dhs_growth.f$source="subnational"
# dhs_growth.f=dhs_growth.f[which(dhs_growth.f$LB==1),]
allshapes=rbindlist(list(countries.f,dhs_growth.f),fill=T)
clb=c("Afghanistan"
,"Benin"
,"Burundi"
,"Central African Rep."
,"Chad"
,"Congo"
,"Dem. Rep. Congo"
,"Eritrea"
,"Gambia"
,"Guinea"
,"Guinea-Bissau"
,"Haiti"
,"Lesotho"
,"Liberia"
,"Madagascar"
,"Malawi"
,"Mali"
,"Micronesia"
,"Mozambique"
,"Niger"
,"Nigeria"
,"Papua New Guinea"
,"Somalia"
,"S. Sudan"
,"Sudan"
,"Syria"
,"Togo"
,"Uganda"
,"Yemen"
,"Zambia"
)
subctryname=unfactor(unique(dhs_growth$CNTRYNAMEE))
subctryname[which(subctryname=="Dominican Republic")]="Dominican Rep."
subctryname[which(subctryname=="Congo Democratic Republic")]="Dem. Rep. Congo"
allshapes$LB[which(allshapes$source=="national" & allshapes$id %in% clb)]=1
allshapes$color="#d9d4da"
allshapes$color[which(allshapes$LB==1 & allshapes$source=="subnational")]="#e84439"
allshapes$color[which(allshapes$LB==0 & allshapes$source=="subnational")]="white"
allshapes$trim="transparent"
allshapes$trim[which(allshapes$id %in% subctryname & allshapes$source=="national" )]="#f8c1b2"
allshapes$trim[which(allshapes$source=="subnational" )]="#f8c1b2"
allshapes$size=2.5
allshapes$size[which(allshapes$source=="subnational")]=.01
lbmap=ggplot(allshapes)+
geom_polygon(aes(long,lat,group=group,color=trim,fill=color,size=size))+
scale_color_identity()+
scale_fill_identity()+
scale_size_identity()+
expand_limits(x=allshapes$long,y=allshapes$lat)+
theme_classic()+
theme(axis.line = element_blank(),axis.text=element_blank(),plot.margin=unit(c(0,0,0,0),"cm"),axis.ticks = element_blank())+
labs(x="",y="")
#Haiti Zoom
haitimap=ggplot(allshapes)+
geom_polygon(aes(long,lat,group=group,color=trim,fill=color,size=size))+
scale_color_identity()+
scale_fill_identity()+
scale_size_identity()+
# expand_limits(x=allshapes$long,y=allshapes$lat)+
xlim(-74.48,-71.6)+
ylim(18,20.1)+
theme_classic()+
theme(axis.line = element_blank(),axis.text=element_blank(),axis.ticks = element_blank())+
labs(x="",y="")
ggsave("E:/git/p20_spatial_2018/eps/subnationallb.png",lbmap,device="png",width=20,height=12)
ggsave("E:/git/p20_spatial_2018/eps/subnationallb.eps",lbmap,device="eps",width=20,height=12)
list.of.packages <- c("sp","rgdal","leaflet","data.table","mapview","ggplot2","RColorBrewer","varhandle")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
lapply(list.of.packages, require, character.only=T)
if(.Platform$OS.type == "unix"){
prefix = "~"
}else{
prefix = "E:"
}
wd = paste0(prefix,"/git/p20_spatial_2018")
setwd(wd)
growthrates=read.csv("project_data/regionswide20180720.csv",as.is=T)
load("project_data/recent_dhs_1.RData")
dhs_growth=merge(recent_dhs_1,growthrates,by=c("OBJECTID","DHSCC"))
dhs_growth=subset(dhs_growth,!is.na(RequestYear.0) | !is.na(RequestYear.1))
layers=list(
"Extreme Poverty Growth Rate"="ext.growthrate"
,"P20 Growth Rate"="P20growthrate"
,"National P20 Growth Rate"="NP20growthrate"
,"Baseline P20 Headcount"="P20HC.0"
,"Baseline National P20 Headcount"="NP20HC.0"
,"Baseline Extreme Poverty Headcount"="ExtremeHC.0"
,"Latest Extreme Poverty Headcount"="ExtremeHC.1"
,"Latest P20 Headcount"="P20HC.1"
,"Latest National P20 Headcount"="NP20HC.1"
)
layernames=names(layers)
url <- "http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/50m/cultural/ne_50m_admin_0_countries.zip"
tmp <- tempdir()
file <- basename(url)
if(!file.exists(file)){
download.file(url, file)
}
unzip(file, exdir = tmp)
countries <- readOGR(dsn = tmp,
layer = "ne_50m_admin_0_countries",
encoding = "UTF-8",
verbose = FALSE)
countries.f=fortify(countries,region="NAME")
countries.f$source="national"
countries.f$LB=0
dhs_growth.f=fortify(dhs_growth,region="OBJECTID")
dhs_growth_data=dhs_growth@data
setnames(dhs_growth_data,"OBJECTID","id")
dhs_growth_data$LB=0
dhs_growth_data$LB[which(dhs_growth_data$ExtremeHC.1>.45)]=1
dhs_growth_data$LB[which(dhs_growth_data$ExtremeHC.1>.20 & dhs_growth_data$ext.growthrate>0)]=1
dhs_growth_data$LB[which(is.na(dhs_growth_data$ExtremeHC.1))]=NA
dhs_growth_data=dhs_growth_data[,c("id","LB")]
dhs_growth.f=merge(dhs_growth.f, dhs_growth_data, by=c("id"))
dhs_growth.f$source="subnational"
dhs_growth.f=dhs_growth.f[which(!is.na(dhs_growth.f$LB)),]
# dhs_growth.f=dhs_growth.f[which(dhs_growth.f$LB==1),]
allshapes=rbindlist(list(countries.f,dhs_growth.f),fill=T)
clb=c("Afghanistan"
,"Benin"
,"Burundi"
,"Central African Rep."
,"Chad"
,"Congo"
,"Dem. Rep. Congo"
,"Eritrea"
,"Gambia"
,"Guinea"
,"Guinea-Bissau"
,"Haiti"
,"Lesotho"
,"Liberia"
,"Madagascar"
,"Malawi"
,"Mali"
,"Micronesia"
,"Mozambique"
,"Niger"
,"Nigeria"
,"Papua New Guinea"
,"Somalia"
,"S. Sudan"
,"Sudan"
,"Syria"
,"Togo"
,"Uganda"
,"Yemen"
,"Zambia"
)
subctryname=unfactor(unique(dhs_growth$CNTRYNAMEE))
subctryname[which(subctryname=="Dominican Republic")]="Dominican Rep."
subctryname[which(subctryname=="Congo Democratic Republic")]="Dem. Rep. Congo"
allshapes$LB[which(allshapes$source=="national" & allshapes$id %in% clb)]=1
allshapes$color="#d9d4da"
allshapes$color[which(allshapes$LB==1 & allshapes$source=="subnational")]="#e84439"
allshapes$color[which(allshapes$LB==0 & allshapes$source=="subnational")]="white"
allshapes$trim="transparent"
allshapes$trim[which(allshapes$id %in% subctryname & allshapes$source=="national" )]="#f8c1b2"
allshapes$trim[which(allshapes$source=="subnational" )]="#f8c1b2"
allshapes$size=2.5
allshapes$size[which(allshapes$source=="subnational")]=.01
lbmap=ggplot(allshapes)+
geom_polygon(aes(long,lat,group=group,color=trim,fill=color,size=size))+
scale_color_identity()+
scale_fill_identity()+
scale_size_identity()+
expand_limits(x=allshapes$long,y=allshapes$lat)+
theme_classic()+
theme(axis.line = element_blank(),axis.text=element_blank(),plot.margin=unit(c(0,0,0,0),"cm"),axis.ticks = element_blank())+
labs(x="",y="")
#Haiti Zoom
haitimap=ggplot(allshapes)+
geom_polygon(aes(long,lat,group=group,color=trim,fill=color,size=size))+
scale_color_identity()+
scale_fill_identity()+
scale_size_identity()+
# expand_limits(x=allshapes$long,y=allshapes$lat)+
xlim(-74.48,-71.6)+
ylim(18,20.1)+
theme_classic()+
theme(axis.line = element_blank(),axis.text=element_blank(),axis.ticks = element_blank())+
labs(x="",y="")
ggsave("E:/git/p20_spatial_2018/eps/subnationallb.png",lbmap,device="png",width=20,height=12)
ggsave("E:/git/p20_spatial_2018/eps/subnationallb.eps",lbmap,device="eps",width=20,height=12)
ggplot(allshapes)+
geom_polygon(aes(long,lat,group=group,color=trim,fill=color,size=size))+
geom_polygon(data=subset(allshapes,source=="national" &id %in% subctryname), aes(long,lat,group=group,color=trim,fill="transparent",size=size))+
scale_color_identity()+
scale_fill_identity()+
scale_size_identity()+
expand_limits(x=allshapes$long,y=allshapes$lat)+
theme_classic()+
theme(axis.line = element_blank(),axis.text=element_blank(),plot.margin=unit(c(0,0,0,0),"cm"),axis.ticks = element_blank())+
labs(x="",y="")
list.of.packages <- c("sp","rgdal","leaflet","data.table","mapview","ggplot2","RColorBrewer","varhandle")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
lapply(list.of.packages, require, character.only=T)
if(.Platform$OS.type == "unix"){
prefix = "~"
}else{
prefix = "E:"
}
wd = paste0(prefix,"/git/p20_spatial_2018")
setwd(wd)
growthrates=read.csv("project_data/regionswide20180720.csv",as.is=T)
load("project_data/recent_dhs_1.RData")
dhs_growth=merge(recent_dhs_1,growthrates,by=c("OBJECTID","DHSCC"))
dhs_growth=subset(dhs_growth,!is.na(RequestYear.0) | !is.na(RequestYear.1))
layers=list(
"Extreme Poverty Growth Rate"="ext.growthrate"
,"P20 Growth Rate"="P20growthrate"
,"National P20 Growth Rate"="NP20growthrate"
,"Baseline P20 Headcount"="P20HC.0"
,"Baseline National P20 Headcount"="NP20HC.0"
,"Baseline Extreme Poverty Headcount"="ExtremeHC.0"
,"Latest Extreme Poverty Headcount"="ExtremeHC.1"
,"Latest P20 Headcount"="P20HC.1"
,"Latest National P20 Headcount"="NP20HC.1"
)
layernames=names(layers)
url <- "http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/50m/cultural/ne_50m_admin_0_countries.zip"
tmp <- tempdir()
file <- basename(url)
if(!file.exists(file)){
download.file(url, file)
}
unzip(file, exdir = tmp)
countries <- readOGR(dsn = tmp,
layer = "ne_50m_admin_0_countries",
encoding = "UTF-8",
verbose = FALSE)
countries.f=fortify(countries,region="NAME")
countries.f$source="national"
countries.f$LB=0
dhs_growth.f=fortify(dhs_growth,region="OBJECTID")
dhs_growth_data=dhs_growth@data
setnames(dhs_growth_data,"OBJECTID","id")
dhs_growth_data$LB=0
dhs_growth_data$LB[which(dhs_growth_data$ExtremeHC.1>.45)]=1
dhs_growth_data$LB[which(dhs_growth_data$ExtremeHC.1>.20 & dhs_growth_data$ext.growthrate>0)]=1
dhs_growth_data$LB[which(is.na(dhs_growth_data$ExtremeHC.1))]=NA
dhs_growth_data=dhs_growth_data[,c("id","LB")]
dhs_growth.f=merge(dhs_growth.f, dhs_growth_data, by=c("id"))
dhs_growth.f$source="subnational"
dhs_growth.f=dhs_growth.f[which(!is.na(dhs_growth.f$LB)),]
# dhs_growth.f=dhs_growth.f[which(dhs_growth.f$LB==1),]
allshapes=rbindlist(list(countries.f,dhs_growth.f),fill=T)
clb=c("Afghanistan"
,"Benin"
,"Burundi"
,"Central African Rep."
,"Chad"
,"Congo"
,"Dem. Rep. Congo"
,"Eritrea"
,"Gambia"
,"Guinea"
,"Guinea-Bissau"
,"Haiti"
,"Lesotho"
,"Liberia"
,"Madagascar"
,"Malawi"
,"Mali"
,"Micronesia"
,"Mozambique"
,"Niger"
,"Nigeria"
,"Papua New Guinea"
,"Somalia"
,"S. Sudan"
,"Sudan"
,"Syria"
,"Togo"
,"Uganda"
,"Yemen"
,"Zambia"
)
subctryname=unfactor(unique(dhs_growth$CNTRYNAMEE))
subctryname[which(subctryname=="Dominican Republic")]="Dominican Rep."
subctryname[which(subctryname=="Congo Democratic Republic")]="Dem. Rep. Congo"
allshapes$LB[which(allshapes$source=="national" & allshapes$id %in% clb)]=1
allshapes$color="#d9d4da"
allshapes$color[which(allshapes$LB==1 & allshapes$source=="subnational")]="#e84439"
allshapes$color[which(allshapes$LB==0 & allshapes$source=="subnational")]="white"
allshapes$trim="transparent"
allshapes$trim[which(allshapes$id %in% subctryname & allshapes$source=="national" )]="#f8c1b2"
allshapes$trim[which(allshapes$source=="subnational" )]="#f8c1b2"
allshapes$size=1.5
allshapes$size[which(allshapes$source=="subnational")]=.01
lbmap=ggplot(allshapes)+
geom_polygon(aes(long,lat,group=group,color=trim,fill=color,size=size))+
geom_polygon(data=subset(allshapes,source=="national" &id %in% subctryname), aes(long,lat,group=group,color=trim,fill="transparent",size=size))+
scale_color_identity()+
scale_fill_identity()+
scale_size_identity()+
expand_limits(x=allshapes$long,y=allshapes$lat)+
theme_classic()+
theme(axis.line = element_blank(),axis.text=element_blank(),plot.margin=unit(c(0,0,0,0),"cm"),axis.ticks = element_blank())+
labs(x="",y="")
#Haiti Zoom
haitimap=ggplot(allshapes)+
geom_polygon(aes(long,lat,group=group,color=trim,fill=color,size=size))+
scale_color_identity()+
scale_fill_identity()+
scale_size_identity()+
# expand_limits(x=allshapes$long,y=allshapes$lat)+
xlim(-74.48,-71.6)+
ylim(18,20.1)+
theme_classic()+
theme(axis.line = element_blank(),axis.text=element_blank(),axis.ticks = element_blank())+
labs(x="",y="")
ggsave("E:/git/p20_spatial_2018/eps/subnationallb.png",lbmap,device="png",width=20,height=12)
ggsave("E:/git/p20_spatial_2018/eps/subnationallb.eps",lbmap,device="eps",width=20,height=12)
subctryname=unfactor(unique(dhs_growth$CNTRYNAMEE))
subctryname[which(subctryname=="Dominican Republic")]="Dominican Rep."
subctryname[which(subctryname=="Congo Democratic Republic")]="Dem. Rep. Congo"
subctryname=subset(subctryname, subctryname!="Cambodia")
allshapes$LB[which(allshapes$source=="national" & allshapes$id %in% clb)]=1
allshapes$color="#d9d4da"
allshapes$color[which(allshapes$LB==1 & allshapes$source=="subnational")]="#e84439"
allshapes$color[which(allshapes$LB==0 & allshapes$source=="subnational")]="white"
allshapes$trim="transparent"
allshapes$trim[which(allshapes$id %in% subctryname & allshapes$source=="national" )]="#f8c1b2"
allshapes$trim[which(allshapes$source=="subnational" )]="#f8c1b2"
allshapes$size=1.5
allshapes$size[which(allshapes$source=="subnational")]=.01
lbmap=ggplot(allshapes)+
geom_polygon(aes(long,lat,group=group,color=trim,fill=color,size=size))+
geom_polygon(data=subset(allshapes,source=="national" &id %in% subctryname), aes(long,lat,group=group,color=trim,fill="transparent",size=size))+
scale_color_identity()+
scale_fill_identity()+
scale_size_identity()+
expand_limits(x=allshapes$long,y=allshapes$lat)+
theme_classic()+
theme(axis.line = element_blank(),axis.text=element_blank(),plot.margin=unit(c(0,0,0,0),"cm"),axis.ticks = element_blank())+
labs(x="",y="")
#Haiti Zoom
haitimap=ggplot(allshapes)+
geom_polygon(aes(long,lat,group=group,color=trim,fill=color,size=size))+
scale_color_identity()+
scale_fill_identity()+
scale_size_identity()+
# expand_limits(x=allshapes$long,y=allshapes$lat)+
xlim(-74.48,-71.6)+
ylim(18,20.1)+
theme_classic()+
theme(axis.line = element_blank(),axis.text=element_blank(),axis.ticks = element_blank())+
labs(x="",y="")
ggsave("E:/git/p20_spatial_2018/eps/subnationallb.png",lbmap,device="png",width=20,height=12)
ggsave("E:/git/p20_spatial_2018/eps/subnationallb.eps",lbmap,device="eps",width=20,height=12)
list.of.packages <- c("sp","rgdal","leaflet","data.table","mapview","ggplot2","RColorBrewer","varhandle")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
lapply(list.of.packages, require, character.only=T)
if(.Platform$OS.type == "unix"){
prefix = "~"
}else{
prefix = "E:"
}
wd = paste0(prefix,"/git/p20_spatial_2018")
setwd(wd)
growthrates=read.csv("project_data/regionswide20180720.csv",as.is=T)
load("project_data/recent_dhs_1.RData")
dhs_growth=merge(recent_dhs_1,growthrates,by=c("OBJECTID","DHSCC"))
dhs_growth=subset(dhs_growth,!is.na(RequestYear.0) | !is.na(RequestYear.1))
layers=list(
"Extreme Poverty Growth Rate"="ext.growthrate"
,"P20 Growth Rate"="P20growthrate"
,"National P20 Growth Rate"="NP20growthrate"
,"Baseline P20 Headcount"="P20HC.0"
,"Baseline National P20 Headcount"="NP20HC.0"
,"Baseline Extreme Poverty Headcount"="ExtremeHC.0"
,"Latest Extreme Poverty Headcount"="ExtremeHC.1"
,"Latest P20 Headcount"="P20HC.1"
,"Latest National P20 Headcount"="NP20HC.1"
)
layernames=names(layers)
url <- "http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/50m/cultural/ne_50m_admin_0_countries.zip"
tmp <- tempdir()
file <- basename(url)
if(!file.exists(file)){
download.file(url, file)
}
unzip(file, exdir = tmp)
countries <- readOGR(dsn = tmp,
layer = "ne_50m_admin_0_countries",
encoding = "UTF-8",
verbose = FALSE)
countries.f=fortify(countries,region="NAME")
countries.f$source="national"
countries.f$LB=0
dhs_growth.f=fortify(dhs_growth,region="OBJECTID")
dhs_growth_data=dhs_growth@data
setnames(dhs_growth_data,"OBJECTID","id")
dhs_growth_data$LB=0
dhs_growth_data$LB[which(dhs_growth_data$ExtremeHC.1>.45)]=1
dhs_growth_data$LB[which(dhs_growth_data$ExtremeHC.1>.20 & dhs_growth_data$ext.growthrate>0)]=1
dhs_growth_data$LB[which(is.na(dhs_growth_data$ExtremeHC.1))]=NA
dhs_growth_data=dhs_growth_data[,c("id","LB")]
dhs_growth.f=merge(dhs_growth.f, dhs_growth_data, by=c("id"))
dhs_growth.f$source="subnational"
dhs_growth.f=dhs_growth.f[which(!is.na(dhs_growth.f$LB)),]
# dhs_growth.f=dhs_growth.f[which(dhs_growth.f$LB==1),]
allshapes=rbindlist(list(countries.f,dhs_growth.f),fill=T)
clb=c("Afghanistan"
,"Benin"
,"Burundi"
,"Central African Rep."
,"Chad"
,"Congo"
,"Dem. Rep. Congo"
,"Eritrea"
,"Gambia"
,"Guinea"
,"Guinea-Bissau"
,"Haiti"
,"Lesotho"
,"Liberia"
,"Madagascar"
,"Malawi"
,"Mali"
,"Micronesia"
,"Mozambique"
,"Niger"
,"Nigeria"
,"Papua New Guinea"
,"Somalia"
,"S. Sudan"
,"Sudan"
,"Syria"
,"Togo"
,"Uganda"
,"Yemen"
,"Zambia"
)
subctryname=unfactor(unique(dhs_growth$CNTRYNAMEE))
subctryname[which(subctryname=="Dominican Republic")]="Dominican Rep."
subctryname[which(subctryname=="Congo Democratic Republic")]="Dem. Rep. Congo"
subctryname=subset(subctryname, subctryname!="Cambodia")
allshapes$LB[which(allshapes$source=="national" & allshapes$id %in% clb)]=1
allshapes$color="#d9d4da"
allshapes$color[which(allshapes$LB==1 & allshapes$source=="subnational")]="#e84439"
allshapes$color[which(allshapes$LB==0 & allshapes$source=="subnational")]="white"
allshapes$trim="transparent"
allshapes$trim[which(allshapes$id %in% subctryname & allshapes$source=="national" )]="#f8c1b2"
allshapes$trim[which(allshapes$source=="subnational" )]="#f8c1b2"
allshapes$size=1
allshapes$size[which(allshapes$source=="subnational")]=.01
lbmap=ggplot(allshapes)+
geom_polygon(aes(long,lat,group=group,color=trim,fill=color,size=size))+
geom_polygon(data=subset(allshapes,source=="national" &id %in% subctryname), aes(long,lat,group=group,color=trim,fill="transparent",size=size))+
scale_color_identity()+
scale_fill_identity()+
scale_size_identity()+
expand_limits(x=allshapes$long,y=allshapes$lat)+
theme_classic()+
theme(axis.line = element_blank(),axis.text=element_blank(),plot.margin=unit(c(0,0,0,0),"cm"),axis.ticks = element_blank())+
labs(x="",y="")
#Haiti Zoom
haitimap=ggplot(allshapes)+
geom_polygon(aes(long,lat,group=group,color=trim,fill=color,size=size))+
scale_color_identity()+
scale_fill_identity()+
scale_size_identity()+
# expand_limits(x=allshapes$long,y=allshapes$lat)+
xlim(-74.48,-71.6)+
ylim(18,20.1)+
theme_classic()+
theme(axis.line = element_blank(),axis.text=element_blank(),axis.ticks = element_blank())+
labs(x="",y="")
ggsave("E:/git/p20_spatial_2018/eps/subnationallb.png",lbmap,device="png",width=20,height=12)
ggsave("E:/git/p20_spatial_2018/eps/subnationallb.eps",lbmap,device="eps",width=20,height=12)
